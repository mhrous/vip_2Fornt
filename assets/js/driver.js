$(document).ready(function(){const{token:e,power:a}=testLogin("driver");(()=>{renderSiteBar();const{accountBulid:e}=(()=>{const e=$("#account-table").DataTable({paging:!1,searching:!1});return{accountBulid:a=>{e.clear().draw();for(let r of Object.values(a)){const a=r.name,t=r.travel.length;let n=0;r.travel.forEach(e=>{const a=e.repairing.reduce((e,a)=>e+(a.isGO?0:a.value),0),r=e.repairing.reduce((e,a)=>e+(a.isGO?a.value:0),0);0==e.cashTo&&0==r&&n++,0==e.cashBack&&0==a&&n++});const s=r.travel.reduce((e,a)=>e+(a.expenses>a.car.expensesMax?1:0),0),c=r.travel.reduce((e,a)=>e+a.repairing.length,0),d=r.travel.reduce((e,a)=>e+a.repairing.reduce((e,a)=>e+a.value,0),0),o=r.travel.reduce((e,a)=>e+a.cashTo+a.cashBack+a.repairing.reduce((e,a)=>e+a.value,0),0),u=r.travel.reduce((e,a)=>e+a.expenses,0),i=r.expenses.reduce((e,a)=>e+a.amount,0),l=r.payment.reduce((e,a)=>e+a.amount,0),p=o-u-d-l-i;e.row.add([a,t,n,s,c,d,o,u,i,l,p]).draw(!1)}}}})();(()=>{const e=$("#all-drivers-table").DataTable({paging:!1,searching:!1,columnDefs:[{orderable:!1,targets:1}]});getDriver({success({data:a}){a.forEach(({address:a,name:r,phone:t,_id:n})=>{e.row.add([`<a href="./oneDriver.html?_id=${n}">${r}</a>`,renderPhone(t),a]).draw(!1)})}})})(),MainDate=new Vue({el:"#MainDate",data:{date:moment(new Date).format("YYYY-MM"),options:{format:"YYYY-MM",useCurrent:!0}},watch:{date(a){let[r,t]=a.split("-");t=parseInt(t),r=parseInt(r),getData({m:t,y:r,success({data:a}){e(a)}})}},mounted(){let[a,r]=this.date.split("-");r=parseInt(r),a=parseInt(a),getData({m:r,y:a,success({data:a}){e(a)}})}})})()});